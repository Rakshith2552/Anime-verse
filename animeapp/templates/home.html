{% extends 'base.html' %}

{% block title %}Home | AnimeVerse{% endblock %}

{% block content %}
<div class="flex flex-col items-center justify-center text-white text-center">

  <!-- üåü Title -->
  <h1 class="text-5xl font-bold mb-8 tracking-wider" style="font-family: 'Orbitron', sans-serif;">
    AnimeVerse
  </h1>

  <!-- üîç Search Form -->
  <form method="get" class="w-3/4 md:w-1/2 flex justify-center">
    <input 
      type="text" 
      name="q" 
      placeholder="Search your favorite anime..." 
      class="p-3 rounded-l-xl w-full text-black focus:outline-none focus:ring-2 focus:ring-red-400" 
      value="{{ query|default:'' }}">
    <button 
      class="bg-red-500 px-6 py-3 rounded-r-xl hover:bg-red-600 transition">
      Search
    </button>
  </form>

  <!-- üîÑ Loader -->
  <div id="loader" class="hidden mt-10">
    <div class="w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto"></div>
    <p class="mt-4 text-lg">Fetching anime data...</p>
  </div>

  <!-- üé¨ Results -->
  {% if results %}
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 mt-12">
    {% for anime in results %}
    <a href="{% url 'anime_detail' anime.mal_id %}" 
       class="block bg-white/10 p-4 rounded-xl transform hover:scale-105 transition hover:bg-white/20">
      <img src="{{ anime.images.jpg.image_url }}" 
           alt="{{ anime.title }}" 
           class="rounded-lg w-full h-64 object-cover shadow-lg">
      <h2 class="text-xl font-semibold mt-3">{{ anime.title }}</h2>
      <p class="text-sm mt-2 text-gray-300">‚≠ê Score: {{ anime.score }}</p>
    </a>
    {% endfor %}
  </div>
  {% elif query %}
    <p class="mt-10 text-xl">No results found for "{{ query }}" üòî</p>
  {% endif %}
</div>

<!-- üåÄ Small JS for Spinner -->
<script>
  const form = document.querySelector("form");
  const loader = document.getElementById("loader");
  form.addEventListener("submit", () => {
    loader.classList.remove("hidden");
  });
</script>
{% endblock %}